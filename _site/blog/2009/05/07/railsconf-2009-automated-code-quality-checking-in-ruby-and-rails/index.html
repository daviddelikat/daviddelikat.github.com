<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
   <meta http-equiv="content-type" content="text/html; charset=utf-8" />
   <title>litany against fear &curren; by nick quaranto &curren; RailsConf 2009 Automated Code Quality Checking in Ruby and Rails</title>
   <meta name="author" content="Nick Quaranto" />
   <link href="http://feeds2.feedburner.com/LitanyAgainstFear" rel="alternate" title="RSS" type="application/rss+xml" />
   <link rel="stylesheet" href="/css/reset.css" type="text/css" media="screen, projection" />
   <link rel="stylesheet" href="/css/960.css" type="text/css" media="screen, projection" />
   <link rel="stylesheet" href="/css/text.css" type="text/css" media="screen, projection" />
   <link rel="stylesheet" href="/css/screen.css" type="text/css" media="screen, projection" />
   <link rel="stylesheet" href="/css/pygment_trac.css" type="text/css" media="screen, projection" />
</head>
<body>
  <div class="container_12">
    <div id="links" class="grid_2">
      <a href="/about.html">about</a>
      <a href="/projects.html">projects</a>
      <a href="http://visualcv.com/nquaranto/">resume</a>
      <a href="/talks.html">talks</a>
      <a href="/written.html">written</a>
      <br />
      <a href="mailto:nick@quaran.to">email</a>
      <a href="http://feeds2.feedburner.com/LitanyAgainstFear">rss</a>
      <a href="http://twitter.com/qrush">twitter</a>
      <a href="http://qrush.tumblr.com">tumblr</a>
      <a href="http://www.workingwithrails.com/person/14728-nick-quaranto">wwr</a>
    </div>
    <div id="main" class="grid_8">
      <h1><a href="/">litany against fear</a></h1>
      <div id="subtitle">coding with spice &curren; by nick quaranto</div>
      <hr />
      <div id="post">
  <h2><a href="/blog/2009/05/07/railsconf-2009-automated-code-quality-checking-in-ruby-and-rails">
    RailsConf 2009 Automated Code Quality Checking in Ruby and Rails
  </a></h2>
  <div id="date">published 07 May 2009</div>
  <p>This is part of my series of notes on RailsConf 2009. <a href="http://litanyagainstfear.com/blog/2009/05/05/railsconf-2009-notes/">Check them all out here.</a></p>
<p>This talk is from Marty Andrews.</p>
<p>Plenty of ways to lower your WTFs/minute when looking at code. Static analysis = just looking at the code without running it. Why do this though? There&#8217;s plenty of practices that already enforce quality: testing, pair programming, etc&#8230;but there&#8217;s much more that you can do on your own.</p>
<p>Code smells are important, you need to really follow your nose. Plenty of tools are available to help with this:</p>
<p>Rails stats, which comes packaged with the framework: <code>rake stats</code>. It gives plenty of metrics, but what is most important is the Code to Test Ratio. This is most useful for human review and communicating with your team that you need to test more.</p>
<p>Reek: searches for code smells. There&#8217;s plenty of things this gem searches for, such as dupliation, long methods, uncommunicative names, control coupling, and the list goes on and on. Showing off how to use the command and what it prints out. Reek is best for regular human review and checking your own code.</p>
<p>Flog: complexity checking of Ruby code. It checks your methods for how complex they are, and warns you when they&#8217;re getting out of hand through a scoring system. Methods with high scores should probably be refactored. You can use flog to enforce code quality at the level of continuous integration: builds don&#8217;t pass if the flog scores are too high.</p>
<p>Flay: is a pretty complex tool that finds duplicate or similarly structured code. This gem can find potential candidates for refactoring. This can also be used in automation, since it has a score as well. Same concept: if the score is over a threshold, fail the build.</p>
<p>Roodi: checks for design problems, which involves checking plenty of different code qualities. Basically prints out different problems with your code. One big thing it checks is cyclomatic complexity, which goes higher for the number of branches and loops in a method. It&#8217;s the minimum amount of tests you need for a piece of code, so refactoring it so it&#8217;s lower is better. Another neat thing is that it looks for <code>=</code> in conditionals. Using Roodi in automation is great since it allows you to tweak the settings that are appropriate for your project, for example the level of cyclomatic complexity that is acceptable.</p>
<p>Metric-fu: reports on all of the above in one neat package with <code>rake metrics:all</code>. It also includes some other great reports, such as Churn. Churn will show you what files have changed the most often in your source code repo, which means that you might want to split it up. This is best for regular human review.</p>
<p>In your CI: flog, flay, roodi.<br />
For yourself and your team: metric_fu, rails stats, reek (and more!)</p>
  <hr />
  <div id="disqus">
    <div id="disqus_thread"></div><script type="text/javascript" src="http://disqus.com/forums/litanyagainstfear/embed.js"></script><noscript><a href="http://litanyagainstfear.disqus.com/?url=ref">View the discussion thread.</a></noscript><a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>
  </div>
</div>


      <hr />
      <div id="footer">
        <a href="http://github.com/qrush/litanyagainstfear">managed by github</a>
        &curren;
        <a href="http://github.com/mojombo/jekyll">generated by jekyll</a>
        &curren;
        <a href="http://creativecommons.org/licenses/by-sa/3.0/us/">licensed by creative commons</a>
        &curren;
        <a href="http://slicehost.com">served by slicehost</a>
      </div>
    </div>
    <div id="categories" class="grid_2">
      <a href="/code.html">code (2)</a>
      <a href="/gaming.html">gaming (3)</a>
      <a href="/git.html">git (9)</a>
      <a href="/internet.html">internet (5)</a>
      <a href="/prorubyconf.html">prorubyconf (25)</a>
      <a href="/railsconf.html">railsconf (17)</a>
      <a href="/ruby.html">ruby (10)</a>
      <a href="/windows.html">windows (3)</a>
    </div>
  </div>
  <script type="text/javascript">
  var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
  document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
  </script>
  <script type="text/javascript">
  try {
  var pageTracker = _gat._getTracker("UA-2896263-1");
  pageTracker._trackPageview();
  } catch(err) {}</script>
</body>
</html>
